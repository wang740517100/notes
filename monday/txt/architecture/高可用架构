CAP 定理（CAP theorem）又被称作布鲁尔定理（Brewer's theorem）, 分布式系统并不一定会互联和共享数据,
CAP 关注的是对数据的读写操作，而不是分布式系统的所有功能。


BASE 是指基本可用（Basically Available）、软状态（ Soft State）、最终一致性（ Eventual Consistency）,
核心思想是即使无法做到强一致性（CAP 的一致性就是强一致性）, 但应用可以采用适合的方式达到最终一致性。



FMEA (Failure mode and effects analysis，故障模式与影响分析), 保证我们做到全面分析的一个非常简单但是非常有效的方法:
在架构设计领域，FMEA 的具体分析方法是:
- 给出初始的架构设计图
- 假设架构中某个部件发生故障
- 分析此故障对系统功能造成的影响
- 根据分析结果，判断架构是否需要进行优化
FMEA 分析的方法其实很简单，就是一个 FMEA 分析表，常见的 FMEA 分析表格指标包含下面部分:
- 功能点
- 故障模式
- 故障影响
- 严重程度
- 故障原因
- 故障概率
- 风险程度
- 已有措施
- 规避措施
- 解决措施
- 后续规划


--------------------------- 高可用的存储架构 ---------------------------------
存储高可用方案的本质都是通过将数据复制到多个存储设备，通过数据冗余的方式来实现高可用，其复杂性主要体现在如何应对
复制延迟和中断导致的数据不一致问题。因此，对任何一个高可用存储方案，我们需要从以下几个方面去进行思考和分析：
- 数据如何复制？
- 各个节点的职责是什么？
- 如何应对复制延迟？
- 如何应对复制中断？
常见的高可用存储架构有主备、主从、主主、集群、分区，每一种又可以根据业务的需求进行一些特殊的定制化功能，由此衍生出
更多的变种。由于不同业务的定制功能难以通用化，今天我将针对业界通用的方案，来分析常见的双机高可用架构：主备、主从、
主备/主从切换和主主。

- 主备复制
- 主从复制
- 主主复制

主备、主从、主主架构本质上都有一个隐含的假设：主机能够存储所有数据，但主机本身的存储和处理能力肯定是有极限的
1)数据集中集群:
- 主机如何将数据复制给备机
- 备机如何检测主机状态
- 主机故障后，如何决定新的主机
2)数据集中集群:
- 均衡性: 算法需要保证服务器上的数据分区基本是均衡的，不能存在某台服务器上的分区数量是另外一台服务器的几倍的情况
- 容错性: 当出现部分服务器故障时，算法需要将原来分配给故障服务器的数据分区分配给其他服务器
- 可伸缩性: 当集群容量不够，扩充新的服务器后，算法能够自动将部分数据分区迁移到新服务器，并保证扩容后所有服务器的均衡性



异地多活架构:
同城异区、跨城异地、跨国异地


如何应对接口级别故障：
- 降级
- 熔断
- 限流
- 排队

